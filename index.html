<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>MySQL Slow Query Log Visualizer</title>

        <link rel="stylesheet" href="css/visualize.css">
        <link rel="stylesheet" href="css/visualize-dark.css">
        <link rel="stylesheet" href="css/style.css">

        <!-- visualizer -->
        <!--<script type="text/javascript" src="js/enhance.js"></script>-->
        <script src="bower_components/jquery-3.7.1.min.js"></script>
        <script src="js/excanvas.js"></script>
        <script src="bower_components/chartjs/chart.umd.js"></script>
        <script src="bower_components/lodash.js"></script>
        <script src="bower_components/clipboard/clipboard.min.js"></script>
        <script src="js/list.js"></script>
        <script src="js/script.js"></script>
    </head>
    <body>
        <div style="float:right;"><a href="https://github.com/shoulders">shoulders @ GitHub-IMAGE-here</a></div>
        <h1>MySQL Slow Query Log Visualizer</h1>
        <div id="information" style="margin-bottom: 25px;">
            <em>If you need to process very large files (&gt;500MB), you will have to call Chrome with <strong>--js-flags="--max-old-space-size=5000"</strong> parameter to increase memory allocatable by Chrome to 5GB</em>
        </div>

        <div id="drop_zone">Drop log file here</div>

        <div id="log_progress" hidden></div>

        <div id="log_information" hidden>
            <h2>Log Information</h2>
            <ul>
                <li><span class="log_information_title">Server: </span><span id="server_details">Not available</span></li>
                <li><span class="log_information_title">File: </span><span id="log_information_file">Not available</span></li>
                <li><span class="log_information_title">Entries: </span><span id="log_information_entries">Not available</span></li>
            </ul>
        </div>

        <!-- Global Chart -->
        <div id="global_chart_container" class="chart_container" style="max-height: 400px; margin-bottom: 40px;" hidden><!-- sort dimensions -->
            <h2>GLOBAL CHART (click twice on graph to define working data)</h2>
            <div>Time Scale (Group By) : <select id="global_time_scale">
                    <option value="minute">Minute</option>
                    <option value="hour" selected>Hour</option>
                    <option value="day">Day</option>
                    <option value="week">Week</option>
                </select>
            </div>
            <p id="global_chart_queries_count"></p>
            <canvas id="globalChart" class="chart" width="1280px" height="600"></canvas>
        </div>

        <br /><br />

        <!-- Working Chart -->
        <div id="working_chart_container" class="chart_container" style="max-height: 400px; display: none; margin-bottom: 40px;"><!-- sort dimensions -->
            <h2>WORKING CHART (click twice on graph to define new working data)</h2>
            <div>
                Time Scale (Group By) : <select id="working_time_scale">
                    <option value="minute">Minute</option>
                    <option value="hour" selected>Hour</option>
                    <option value="day">Day</option>
                    <option value="week">Week</option>
                </select>
            </div>
            <p id="working_chart_queries_count"></p>
            <canvas id="workingChart" class="chart" width="1280px" height="600"></canvas>
        </div>

        <br /><br />

        <!-- Table -->
        <div id="query_results" style="display:none"><!-- maybe use disabled-->
            <p>Chart filtering : start = <span id="filterStart"></span>, end = <span id="filterEnd"></span></p>
            <table id="log_list">
                <thead class="header">
                    <tr id="search">
                        <th colspan="10">
                            <span class="list_search">
                                <span id="search_count"></span>
                                <label for="log_list_search">Filter:</label>
                                <input id="log_list_search" class="search" />
                                <input type="checkbox" class="reverseSearch" />Invert
                            </span>
                        </th>
                    </tr>
                    <tr>
                        <th scope="col" class="sort" data-sort="time">Time<br>(Local)<span class="sort-icon"></span></th>
                        <th scope="col" class="sort" data-sort="query_duration">Query Duration<br>(Seconds)<span class="sort-icon"></span></th>
                        <th scope="col" class="sort" data-sort="lock_duration">Lock Duration<br>(Seconds)<span class="sort-icon"></span></th>
                        <th scope="col" class="sort" data-sort="rows_sent">Rows Sent<span class="sort-icon"></span></th>
                        <th scope="col" class="sort" data-sort="rows_examined">Rows Examined<span class="sort-icon"></span></th>
                        <th scope="col" class="sort" data-sort="db_name">DB Name<span class="sort-icon"></span></th>
                        <th scope="col" class="sort" data-sort="query_pattern_global_occurences">Query Pattern Occurences<br>(Global Data)<br>(Stripped WHERE)<span class="sort-icon"></span></th>
                        <th scope="col" class="sort" data-sort="query_pattern_filtered_occurences">Query Pattern Occurences<br>(Working Data)<br>(Stripped WHERE)<span class="sort-icon"></span></th>
                        <th scope="col" class="sort" data-sort="query_string">Query String<span class="sort-icon"></span></th>
                        <th scope="col" class="sort" data-sort="displayed_query_with_stripped_where_clauses">Query String<br>(Stripped WHERE)<span class="sort-icon"></span></th>
                    </tr>
                </thead>
                <tbody class="list">
                    <tr id="log_list_item">
                        <th scope="row" class="date"></th>
                        <td class="query_duration"></td>
                        <td class="lock_duration"></td>
                        <td class="rows_sent"></td>
                        <td class="rows_examined"></td>
                        <td class="db_name"></td>
                        <td class="query_pattern_global_occurences"></td>
                        <td class="query_pattern_filtered_occurences"></td>
                        <td class="qs"><pre class="query_string"></pre></td>
                        <td class="qs"><pre class="displayed_query_with_stripped_where_clauses"></pre></td>
                    </tr>
                </tbody>
                <tfoot></tfoot>
            </table>
        </div>
        <p class="credits">MySQL Slow Query Log Visualizer</p>
        <p class="credits">&copy; 2015 <a href="http://www.4sh.fr">4SH</a> and <a href="http://www.neurofuzzy.net">Neurofuzzy Consulting</a></p>
        <p class="credits">&copy; 2025 - shoulders from <a href="https://quantunmwarp.com/">QuantumWarp</a></p>
    </body>
</html>
